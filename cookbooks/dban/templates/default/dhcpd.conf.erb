# vim: syntax=ruby:expandtab:shiftwidth=2:softtabstop=2:tabstop=2
#
# /etc/dhcpd.conf
#
# Generated by Chef.
#
# You don't need to touch this!!
# This file is maintained by chef, cookbook fb_dhcpd.
#
# For new defaults, update the attributes/ directory in this cookbook.
#
# For particular additions, add them to a cookbook or a role.  Refer to
# README.md in chef/cookbooks/fb_dhcpd for details.
#
include "/etc/dhcpd/dhcpd.conf.common";

group {
  next-server <%= node['fb']['fb_dhcpd']['next_server'] %>;
  option option-140 "<%= node['fb']['fb_dhcpd']['next_server'] %>";
  option domain-name "<%= @dc %>.facebook.com facebook.com";
<% if node['fb']['fb_dhcpd']['override_nameservers'] -%>
  option domain-name-servers <%=
    node['fb']['fb_dhcpd']['override_nameservers'].join(', ') %>;
<% else -%>
  option domain-name-servers <%=
    node['fb']['fb_resolv']['nameservers'].join(', ') %>;
<% end -%>
<% @tables.each do |table| %>
  include "<%= table %>";
<% end %>
}
